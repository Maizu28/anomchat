:root {
    /* Warna WhatsApp */
    --whatsapp-green: #075E54;
    --whatsapp-light-green: #128C7E;
    --whatsapp-bubble-received: #E0E0E0; /* abu-abu muda */
    --whatsapp-bubble-sent: #DCF8C6;    /* hijau muda */
    --whatsapp-background: #ECE5DD;     /* background chat */
    --whatsapp-text-dark: #262626;
    --whatsapp-text-light: #4A4A4A;
    --whatsapp-blue-check: #34B7F1;
}

/* === PENTING: Kontrol Skala Keseluruhan === */
html {
    font-size: 16px; /* Default desktop base font size */
    height: 100%; /* Pastikan HTML mengambil 100% tinggi */
    overflow: hidden; /* Mencegah scroll pada HTML jika tidak diperlukan */
}

body {
    font-family: 'Segoe UI', Helvetica, Arial, sans-serif;
    margin: 0;
    padding: 0;
    background-color: var(--whatsapp-background);
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100%; /* Pastikan body mengambil 100% tinggi dari HTML */
    width: 100%; /* Pastikan body mengambil 100% lebar */
    color: var(--whatsapp-text-dark);
    font-size: 1rem; /* Menggunakan rem untuk skalabilitas */
    overflow: hidden; /* Mencegah scroll pada body */
}

.chat-container {
    background-color: #ffffff;
    width: 100%; /* Selalu 100% lebar */
    height: 100vh; /* Selalu 100% tinggi viewport */
    display: flex;
    flex-direction: column;
    overflow: hidden; /* Pastikan konten tidak meluber */
    box-shadow: none; /* Hilangkan shadow */
    border-radius: 0; /* Hilangkan border radius */
    /* Pastikan tidak ada margin yang membuatnya menyusut */
    margin: 0;
}

/* === Header Chat === */
.chat-header {
    display: flex;
    align-items: center;
    padding: 1.25rem 1.25rem; /* 20px padding */
    background-color: var(--whatsapp-green);
    color: white;
    box-shadow: 0 0.125rem 0.3125rem rgba(0, 0, 0, 0.1); /* 2px 5px shadow */
    z-index: 10;
    flex-shrink: 0; /* Penting: mencegah header menyusut */
}

.chat-header img {
    width: 3rem; /* 48px */
    height: 3rem; /* 48px */
    border-radius: 50%;
    margin-right: 0.9375rem; /* 15px */
    object-fit: cover;
    background-color: #fff;
    padding: 0.125rem; /* 2px */
}

.group-info {
    flex-grow: 1;
}

.group-info h2 {
    margin: 0;
    font-size: 1.25rem; /* 20px */
    font-weight: 500;
}

.group-info p {
    margin: 0;
    font-size: 0.875rem; /* 14px */
    opacity: 0.9;
    color: rgba(255, 255, 255, 0.8);
}

/* === Chat Box (Area Pesan) === */
.chat-box {
    flex-grow: 1;
    padding: 0.625rem 0.9375rem; /* 10px 15px */
    overflow-y: auto; /* Bisa di-scroll */
    background-color: var(--whatsapp-background);
    display: flex;
    flex-direction: column;
    gap: 0.5rem; /* 8px */
    scroll-behavior: smooth;
    background-image: url('https://web.whatsapp.com/img/bg-chat-tile-light_01b0fcc98647007e997426639c053c7c.png'); /* Contoh, ganti dengan URL Anda */
    background-repeat: repeat;
    background-size: 15rem; /* Sesuaikan ukuran pattern jika perlu */
}

/* Scrollbar styling for a cleaner look */
.chat-box::-webkit-scrollbar {
    width: 0.375rem; /* 6px */
}

.chat-box::-webkit-scrollbar-track {
    background: #f1f1f1;
}

.chat-box::-webkit-scrollbar-thumb {
    background: #888;
    border-radius: 0.1875rem; /* 3px */
}

.chat-box::-webkit-scrollbar-thumb:hover {
    background: #555;
}

/* === Pesan (Chat Bubbles) === */
.message {
    padding: 0.625rem 0.75rem; /* 10px 12px */
    border-radius: 0.5rem; /* 8px */
    max-width: 80%; /* Ditingkatkan sedikit agar lebih besar */
    position: relative;
    font-size: 0.95rem; /* 15.2px, sedikit lebih besar */
    line-height: 1.3;
    box-shadow: 0 0.0625rem 0.03125rem rgba(0, 0, 0, 0.13); /* 1px 0.5px shadow */
    word-wrap: break-word;
}

.message::before {
    content: '';
    position: absolute;
    top: 0;
    width: 0;
    height: 0;
    border-style: solid;
}

/* Pesan Diterima (kiri) */
.message:not(.user-local) {
    background-color: var(--whatsapp-bubble-received);
    align-self: flex-start;
    border-top-left-radius: 0.1875rem; /* Sedikit radius untuk ujung */
    border-bottom-left-radius: 0.1875rem; /* Sedikit radius untuk ujung */
    border-top-right-radius: 0.5rem;
    border-bottom-right-radius: 0.5rem;
}

.message:not(.user-local)::before {
    border-width: 0 0.625rem 0.625rem 0; /* 0 10px 10px 0 */
    border-color: transparent var(--whatsapp-bubble-received) transparent transparent;
    left: -0.5rem; /* -8px */
    top: 0.0625rem; /* 1px */
}

/* Pesan Dikirim (kanan) */
.message.user-local {
    background-color: var(--whatsapp-bubble-sent);
    align-self: flex-end;
    border-top-right-radius: 0.1875rem; /* Sedikit radius untuk ujung */
    border-bottom-right-radius: 0.1875rem; /* Sedikit radius untuk ujung */
    border-top-left-radius: 0.5rem;
    border-bottom-left-radius: 0.5rem;
}

.message.user-local::before {
    border-width: 0.625rem 0.625rem 0 0; /* 10px 10px 0 0 */
    border-color: var(--whatsapp-bubble-sent) transparent transparent transparent;
    right: -0.5rem; /* -8px */
    top: 0.0625rem; /* 1px */
}

.message.optimistic {
    opacity: 0.7;
    border: 0.0625rem dashed #bbb; /* 1px dashed */
    box-shadow: none;
}

.message.failed {
    background-color: #ffdddd;
    border: 0.0625rem solid #f00;
    color: #c00;
    opacity: 1;
    box-shadow: none;
}

.message-text-content {
    margin: 0;
    padding-bottom: 0.125rem; /* 2px */
    color: var(--whatsapp-text-dark);
}

.message-text-content strong {
    color: var(--whatsapp-text-dark);
    font-weight: 600;
}

.timestamp {
    font-size: 0.625rem; /* 10px, lebih kecil */
    color: var(--whatsapp-text-light);
    text-align: right;
    margin-top: 0.25rem; /* 4px */
    display: block;
}

/* === Form Input Chat === */
.chat-form {
    display: flex;
    align-items: flex-end; /* Align item ke bawah untuk input dan button */
    padding: 0.625rem 0.9375rem; /* 10px 15px */
    background-color: #f0f0f0;
    border-top: 0.0625rem solid #e0e0e0; /* 1px solid */
    /* Padding untuk menghindari navigasi mobile dan memberi ruang ekstra */
    padding-bottom: calc(env(safe-area-inset-bottom, 0.625rem) + 0.625rem); /* default 10px + 10px */
    flex-shrink: 0; /* Penting: mencegah form input menyusut */
}

.chat-form input[type="text"] {
    flex-grow: 1;
    padding: 0.75rem 1rem; /* 12px 16px */
    border: none;
    border-radius: 1.25rem; /* 20px */
    background-color: #fff;
    font-size: 1rem; /* 16px */
    margin-right: 0.5rem; /* 8px */
    outline: none;
    box-shadow: 0 0.0625rem 0.1875rem rgba(0, 0, 0, 0.1); /* 1px 3px shadow */
    resize: none;
    min-height: 2.75rem; /* 44px, tinggi minimum untuk input */
    line-height: 1.4;
    transition: box-shadow 0.2s ease;

    /* Tambahan: styling khusus untuk placeholder */
    &::placeholder {
        color: #888;
        opacity: 0.8;
    }
}

.chat-form input[type="text"]:focus {
    box-shadow: 0 0 0 0.125rem var(--whatsapp-light-green); /* 2px shadow saat fokus */
}

.chat-form button[type="submit"] {
    background-color: var(--whatsapp-light-green);
    color: white;
    border: none;
    width: 3rem; /* 48px */
    height: 3rem; /* 48px */
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 1.375rem; /* 22px untuk ikon */
    cursor: pointer;
    box-shadow: 0 0.0625rem 0.1875rem rgba(0, 0, 0, 0.1); /* 1px 3px shadow */
    transition: background-color 0.3s ease, transform 0.1s ease;
}

.chat-form button[type="submit"]:hover {
    background-color: #075E54;
}

.chat-form button[type="submit"]:active {
    transform: scale(0.95);
}

.chat-form button[type="submit"]:disabled {
    background-color: #b0b0b0;
    cursor: not-allowed;
    opacity: 0.8;
}

/* Menggunakan pseudo-element untuk ikon kirim */
.chat-form button[type="submit"]::before {
    content: 'â–¶'; /* Karakter play segitiga */
    transform: rotate(-90deg); /* Putar untuk jadi ikon kirim */
    display: block;
    line-height: 1;
}

/* === Pesan Error === */
.error-message {
    text-align: center;
    color: #d9534f;
    padding: 0.625rem; /* 10px */
    background-color: #f2dede;
    border: 0.0625rem solid #ebccd1; /* 1px solid */
    border-radius: 0.3125rem; /* 5px */
    margin-top: 0.625rem; /* 10px */
    font-size: 0.875rem; /* 14px */
}

/* === Media Queries untuk Skala Adaptif === */
@media (max-width: 768px) {
    html {
        font-size: 15px; /* Base font-size 15px */
    }
}

@media (max-width: 480px) {
    html {
        font-size: 14px; /* Base font-size 14px untuk layar sangat kecil */
    }
    .chat-header {
        padding: 0.9375rem 0.9375rem; /* 15px padding */
    }
    .chat-header img {
        width: 2.5rem; /* 40px */
        height: 2.5rem; /* 40px */
        margin-right: 0.625rem; /* 10px */
    }
    .group-info h2 {
        font-size: 1.125rem; /* 18px */
    }
    .group-info p {
        font-size: 0.75rem; /* 12px */
    }
    .chat-form input[type="text"] {
        padding: 0.625rem 0.875rem; /* 10px 14px */
        min-height: 2.5rem; /* 40px */
    }
    .chat-form button[type="submit"] {
        width: 2.75rem; /* 44px */
        height: 2.75rem; /* 44px */
    }
}

/* Gaya tambahan untuk mode landscape pada mobile jika diperlukan */
@media screen and (orientation: landscape) and (max-height: 480px) {
    .chat-container {
        height: 100vh; /* Pastikan tetap 100% viewport height */
        /* Anda mungkin perlu menyesuaikan padding atau margin elemen di dalamnya */
    }
    .chat-header {
        padding-top: 0.5rem;
        padding-bottom: 0.5rem;
    }
    .chat-box {
        padding-top: 0.5rem;
        padding-bottom: 0.5rem;
    }
    .chat-form {
        padding-top: 0.5rem;
        padding-bottom: calc(env(safe-area-inset-bottom, 0.625rem) + 0.3125rem); /* Sedikit lebih kecil */
    }
}
